<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video user study</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 90%;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5ff;
        }
        .video-container {
            background-color: white;
            margin-bottom: 30px;
            padding: 20px 0 0 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .video-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            padding: 0 20px;
        }
        .video-wrapper {
            position: relative;
            width: calc(100% - 40px);
            margin: 0 20px;
        }
        video {
            width: 100%;
            height: auto;
            display: block;
        }
        .video-overlays {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .video-overlay {
            position: absolute;
            top: 0;
            height: 100%;
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
            box-sizing: border-box;
        }
        .video-overlay.dimmed {
            opacity: 1;
            background-color: rgba(0, 0, 0, 0.7);
        }
        .video-overlay.highlighted {
            opacity: 1;
            background-color: transparent;
            outline: 4px solid #2196F3;
            outline-offset: 0px;
            box-shadow: 0 0 20px rgba(33, 150, 243, 0.6);
            z-index: 200;
        }
        .questions {
            margin: 0;
            padding: 0 0 20px 0;
            position: relative;
        }
        .question {
            background-color: #f9f9f9;
            padding: 15px 0 0 0;
            margin: 0 20px 15px 20px;
            border-radius: 5px;
            position: relative;
        }
        .question::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: #007bff;
            border-radius: 5px 0 0 5px;
        }
        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            padding: 0 15px;
            color: #333;
        }
        .options {
            display: flex;
            width: 100%;
            margin: 10px 0 15px 0;
        }
        .option {
            flex: 1;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border: 3px solid #ddd;
            background-color: #f9f9f9;
            transition: all 0.2s ease;
            user-select: none;
            position: relative;
        }
        .option:hover {
            background-color: #e3f2fd;
            border-color: #2196F3;
            z-index: 101;
        }
        .option.selected {
            background-color: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        .option.selected::before {
            background: linear-gradient(to top, rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0));
        }
        .option input[type="radio"] {
            display: none;
        }
        .video-info {
            background-color: #f0f8ff;
            padding: 15px;
            margin: 0 20px 0 20px;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .video-info-item, .video-info-item-small {
            margin-bottom: 10px;
        }
        .video-info-label {
            font-weight: bold;
            color: #333;
            margin-right: 8px;
        }
        .video-info-item-small {
            font-size: 0.9em;
            color: #555;
        }
        .results-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        .results-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        #results {
            width: 100%;
            height: 150px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
            resize: vertical;
        }
        #downloadButton {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: block;
            margin: 20px auto 10px auto;
        }
        #downloadButton:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 30px;">Video user study</h1>

    <div style="background-color: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <p style="font-size: 18px; font-weight: bold; margin-bottom: 15px; text-align: center;">Instructions: Please read before proceeding!</p>
        <p>Thanks for doing our user study for video generation models! Particularly, you will be evaluating the task of <i>generative virtual camera</i>: Given an input video, we want to render the dynamic scene represented by this input video from a different, possibly moving camera viewpoint. You will be shown videos with <b>eight</b> items in a 2x4 grid: <b>Input video</b>, <b>Camera visualization</b>, and six shuffled methods (<b>Options A&ndash;F</b>). For each video, please answer the three questions below by selecting your preference out of the six methods. This user study should take about <b>30 minutes</b> to complete, during which you will look through <b>30 videos</b>.</p>
        <p><strong>Note:</strong> All methods receive the <i>same</i> <b>input video</b> and desired camera trajectory and zoom. To better communicate the camera motion to you, we provide the <b>camera visualization</b> video which roughly corresponds to the desired camera. We also provide a written <b>camera description</b> for the same purpose. (Camera visualization videos can have artifacts, so they might appear more jittery and noisy than the intended camera viewpoint. Use your best judgement when using it as a reference!)
        <p><strong>How to evaluate:</strong> Look at the <b>input video</b> (row 1, column 1), the <b>camera visualization</b> (row 2, column 1), and the written <b>camera description</b> to understand the intended camera and scene motion. Then, evaluate how well each <b>Option (A&ndash;F)</b> renders the scene from the new camera viewpoint while preserving the input video content and quality and pick the best option.</p>
        <p><strong>Once completed:</strong> Click the <b>Download results</b> button at the bottom of the page and it will download a JSON file to your computer. Please email the JSON file to <a href="mailto:jordan@cs.columbia.edu">jordan@cs.columbia.edu</a> with the subject line "[Video user study] Your name". Please make sure to have answered every question before sending your results, thanks!</p>
        <p><strong>Warning:</strong> Refreshing the page will <i>erase</i> your progress, so try to do this user study in one sitting!</p>
    </div>

    <div id="video-containers"></div>

    <div class="results-container">
        <div class="results-title">Results (JSON format):</div>
        <textarea id="results" readonly placeholder="Results will appear here as you make selections ..."></textarea>
        <button id="downloadButton">Download results</button>
        <p style="margin-top: 15px; font-weight: bold; color: #333;">
            Once completed, please click the Download results button and send the resulting JSON file to <a href="mailto:jordan@cs.columbia.edu">jordan@cs.columbia.edu</a> with the subject line "[Video user study] Your name", along with how long it took you to complete this user study in the body of the email. Please make sure to have answered <i>every</i> question before sending your results. Thanks again for doing our user study :D
        </p>
        <p><i>If the button doesn't work, worry not! In that case copy the entire <b>Results (JSON format)</b> field (click on the text box and press Ctrl+A or Cmd+A to select all the results), save those results into a text file, and send it to the above email the same way :)</i></p>
    </div>


    <script>
        const videos = ['video_pairs_randomized/410523><goat_truck-dolly-zoom_s79577.mp4', 'video_pairs_randomized/541032><friends-restaurant_side-dolly_s40338.mp4', 'video_pairs_randomized/142530><couch-sit_right-left-zoom_s67765.mp4', 'video_pairs_randomized/310245><forehead-sticky_left-right-shoulder_s95708.mp4', 'video_pairs_randomized/312045><soapbox_front-follow_s60155.mp4', 'video_pairs_randomized/135402><car-roundabout_crane-above_s13442.mp4', 'video_pairs_randomized/032541><golf_dolly-out_s55180.mp4', 'video_pairs_randomized/154032><selfie-four_phone-dolly-zoom_s56128.mp4', 'video_pairs_randomized/021543><martian-flag_crane-below-zoom_s67388.mp4', 'video_pairs_randomized/253104><parkour_left-front-arc_s50131.mp4', 'video_pairs_randomized/524301><mountain-hike_front-follow_s60967.mp4', 'video_pairs_randomized/253041><drive-desert_back-follow_s89547.mp4', 'video_pairs_randomized/014523><funeral-procession_side-truck_s65876.mp4', 'video_pairs_randomized/452301><desert-park_right-front_s10438.mp4', 'video_pairs_randomized/231045><snowboard_crane-follow_s36609.mp4', 'video_pairs_randomized/350241><avocado-slice_close-crane-above_s98366.mp4', 'video_pairs_randomized/503142><swing_arc-left_s20227.mp4', 'video_pairs_randomized/541302><snow-dog_left-right-arc_s76820.mp4', 'video_pairs_randomized/245013><hike_front-follow_s89120.mp4', 'video_pairs_randomized/431502><snow-bike_follow-crane-above_s71234.mp4', 'video_pairs_randomized/230415><cows_front-dolly-zoom_s55699.mp4', 'video_pairs_randomized/402153><bed-shopping_top-arc_s60648.mp4', 'video_pairs_randomized/023514><women-talk_crane-below_s44259.mp4', 'video_pairs_randomized/105432><camera-lens_side-full_s62469.mp4', 'video_pairs_randomized/041532><girls-selfie_crane-above_s90679.mp4', 'video_pairs_randomized/235140><park-selfie_front-pedestal_s25887.mp4', 'video_pairs_randomized/125430><truck-pose_left-right_s44473.mp4', 'video_pairs_randomized/415032><pigeon-lady_fly-in_s30337.mp4', 'video_pairs_randomized/540123><rhino_front-follow_s97002.mp4', 'video_pairs_randomized/140325><dance-twirl_crane-below_s67554.mp4'];
        const videoMetadata = {"avocado-slice_left-front-zoom": {"name": "avocado-slice_left-front-zoom", "scene": "avocado-slice", "file": "c(left-front-zoom)_m1.0_i(none)", "seed": "38629", "source": "pexels", "desc": "The camera starts on the left side of the scene, starting out zoomed in a bit, shooting the profile of the person. The camera then moves in an arc to the front view of the person, now zoomed out to be wide-angle, right in front of the bowl and bottle."}, "avocado-slice_close-crane-above": {"name": "avocado-slice_close-crane-above", "scene": "avocado-slice", "file": "c(close-crane-above)_m1.0_i(none)", "seed": "98366", "source": "pexels", "desc": "The camera starts on the slight left of the person's hand which is cutting an avocado, in a wide-angle close-up. The camera then cranes up and away from the scene, until the person is on the lower-left-third of the frame."}, "basketball-four_right-left": {"name": "basketball-four_right-left", "scene": "basketball-four", "file": "c(right-left)_m1.0_i(none)", "seed": "93253", "source": "pexels", "desc": ""}, "basketball-four_shoulder-out": {"name": "basketball-four_shoulder-out", "scene": "basketball-four", "file": "c(shoulder-out)_m1.0_i(none)", "seed": "97762", "source": "pexels", "desc": "The camera starts looking over the shoulder of the left woman sitting on the left man's shoulder, sligtly zoomed in. The camera then moves backwards and slightly arcing to the right, while also zooming out to reveal almost the full body of the four people in the scene."}, "bed-shopping_dolly-out": {"name": "bed-shopping_dolly-out", "scene": "bed-shopping", "file": "c(dolly-out)_m1.0_i(none)", "seed": "86877", "source": "pexels", "desc": "The camera is more wide-angle than the input video, starting out lower on the bed and tilting upwards to place the woman at the center of the frame. The camera then moves backwards without zooming to the edge oft he bed, keeping the woman at the center of the frame the entire time."}, "bed-shopping_top-arc": {"name": "bed-shopping_top-arc", "scene": "bed-shopping", "file": "c(top-arc)_m1.0_i(none)", "seed": "60648", "source": "pexels", "desc": "The camera starts on the left side of the scene, positioned higher up and tilting to look down at the woman on the bed. It then arcs back towards the middle of the scene, panning left slightly to keep the woman at the center of the shot."}, "bmx-bumps_front-follow": {"name": "bmx-bumps_front-follow", "scene": "bmx-bumps", "file": "c(front-follow)_m1.0_i(none)", "seed": "20508", "source": "davis", "desc": "The camera, much more wide angle/zoomed out compared to the input video, is positioned right in front (and slightly to the right of) the BMX bike rider. The camera then flies backwards, following the motion of the bike rider as they come towards the camera, keeping the bike rider roughly at the center of the shot."}, "bmx-bumps_crane-follow-zoom": {"name": "bmx-bumps_crane-follow-zoom", "scene": "bmx-bumps", "file": "c(crane-follow-zoom)_m1.0_i(none)", "seed": "37444", "source": "davis", "desc": ""}, "breakdance_crane-dolly-zoom": {"name": "breakdance_crane-dolly-zoom", "scene": "breakdance", "file": "c(crane-dolly-zoom;rot_(0,(0,0,-10)),(1,(0,0,20)))_m1.0_i(none)", "seed": "17890", "source": "davis", "desc": "The camera starts out far away and slightly high up from the scene but zoomed in, with a counterclockwise yaw (rotation so the horizon is not level). It then flies towards the breakdancer, flies lower (at the end almost touching the ground), zooming to be more wide angle, and doing yaw rotation clockwise."}, "breakdance_left-right": {"name": "breakdance_left-right", "scene": "breakdance", "file": "c(left-right)_m1.0_i(none)", "seed": "34408", "source": "davis", "desc": ""}, "camel_zoom-out": {"name": "camel_zoom-out", "scene": "camel", "file": "c(zoom-out)_m1.0_i(none)", "seed": "20081", "source": "davis", "desc": "The camera is high up and far away from the scene, and stays completely static (no camera trajectory change) throughout the shot. It, however, starts out zoomed in zooms out throughout the video, revealing more of the scene."}, "camel_three-in-out": {"name": "camel_three-in-out", "scene": "camel", "file": "c(three-in-out)_m1.0_i(none)", "seed": "74348", "source": "davis", "desc": ""}, "camera-lens_side-full": {"name": "camera-lens_side-full", "scene": "camera-lens", "file": "c(side-full)_m1.0_i(none)", "seed": "62469", "source": "pexels", "desc": "The camera starts off further away from the man then the input video, keeping him on roughly the left-third of the frame the entire time. Throughout the video, the man's entire body is visible, and the camera moves slightly closer to the man as the video goes on while getting slightly lower too, tilting upwards slightly to keep him vertically roughly centered."}, "camera-lens_crane-zoom": {"name": "camera-lens_crane-zoom", "scene": "camera-lens", "file": "c(crane-zoom)_m1.0_i(none)", "seed": "94929", "source": "pexels", "desc": ""}, "car-roundabout_front-follow": {"name": "car-roundabout_front-follow", "scene": "car-roundabout", "file": "c(front-follow)_m1.0_i(none)", "seed": "32822", "source": "davis", "desc": ""}, "car-roundabout_side-truck": {"name": "car-roundabout_side-truck", "scene": "car-roundabout", "file": "c(side-truck)_m1.0_i(none)", "seed": "78740", "source": "davis", "desc": ""}, "car-roundabout_crane-above": {"name": "car-roundabout_crane-above", "scene": "car-roundabout", "file": "c(crane-above)_m1.0_i(none)", "seed": "13442", "source": "davis", "desc": "The camera starts off on the front-left side of the car, relatively close to it, having the car on the lower-left-third of the frame. It then flies away from the car to reveal the full roundaout while the car drives around the roundabout, keeping the car on a rough lower-left-third of the frame the entire time. The camera does not zoom in or out throughout the video but does start out more wide-angle than the input video."}, "couch-sit_crane-below": {"name": "couch-sit_crane-below", "scene": "couch-sit", "file": "c(crane-below;rot_(0,(0,0,-5)),(1,(0,0,-20)))_m1.0_i(none)", "seed": "15944", "source": "pexels", "desc": ""}, "couch-sit_right-left-zoom": {"name": "couch-sit_right-left-zoom", "scene": "couch-sit", "file": "c(right-left-zoom)_m1.0_i(none)", "seed": "67765", "source": "pexels", "desc": "The camera starts on the right hand side of the frame, pointing to the left to keep the women and couch at the center of the frame and slightly further away from the couch than the input video. It then arcs to the left hand side, moving to the left side of the couch while panning right to keep the subjects centered, while moving slightly closer to the cough."}, "couple-hug_crane-above": {"name": "couple-hug_crane-above", "scene": "couple-hug", "file": "c(crane-above)_m1.0_i(none)", "seed": "80301", "source": "pexels", "desc": ""}, "couple-hug_crane-below-zoom": {"name": "couple-hug_crane-below-zoom", "scene": "couple-hug", "file": "c(crane-below-zoom;rot_(0,(0,0,0)),(1,(0,0,-30)))_m1.0_i(none)", "seed": "78009", "source": "pexels", "desc": ""}, "couple-newspaper_three-stop": {"name": "couple-newspaper_three-stop", "scene": "couple-newspaper", "file": "c(three-stop)_m1.0_i(none)", "seed": "33990", "source": "pexels", "desc": ""}, "couple-newspaper_between-heads": {"name": "couple-newspaper_between-heads", "scene": "couple-newspaper", "file": "c(between-heads)_m1.0_i(none)", "seed": "56468", "source": "pexels", "desc": ""}, "couple-rocks_zoom-in": {"name": "couple-rocks_zoom-in", "scene": "couple-rocks", "file": "c(zoom-in)_m1.0_i(none)", "seed": "61105", "source": "pexels", "desc": ""}, "couple-rocks_right-left": {"name": "couple-rocks_right-left", "scene": "couple-rocks", "file": "c(right-left;rot_(0,(0,0,20)),(1,(0,0,0)))_m1.0_i(none)", "seed": "16478", "source": "pexels", "desc": ""}, "couple-walk_front-follow": {"name": "couple-walk_front-follow", "scene": "couple-walk", "file": "c(front-follow)_m1.0_i(none)", "seed": "73172", "source": "pexels", "desc": ""}, "couple-walk_side-truck": {"name": "couple-walk_side-truck", "scene": "couple-walk", "file": "c(side-truck)_m1.0_i(none)", "seed": "92113", "source": "pexels", "desc": ""}, "cows_crane-below-right": {"name": "cows_crane-below-right", "scene": "cows", "file": "c(crane-below-right)_m1.0_i(none)", "seed": "28176", "source": "davis", "desc": ""}, "cows_front-dolly-zoom": {"name": "cows_front-dolly-zoom", "scene": "cows", "file": "c(front-dolly-zoom)_m1.0_i(none)", "seed": "55699", "source": "davis", "desc": "The camera starts on the front left side of the cow. As the cow walks forward, the camera moves towards the cow while zooming out slightly to create a slight dolly-zoom effect."}, "dance-twirl_right-left": {"name": "dance-twirl_right-left", "scene": "dance-twirl", "file": "c(right-left)_m1.0_i(none)", "seed": "48600", "source": "davis", "desc": ""}, "dance-twirl_crane-below": {"name": "dance-twirl_crane-below", "scene": "dance-twirl", "file": "c(crane-below)_m1.0_i(none)", "seed": "67554", "source": "davis", "desc": "The camera starts far away from and to the right side of the input video, with the dancing woman at the rough bottom-left-third of the scene. The camera then flies towards the woman, ending with the upper-half of her body in frame and filling the frame vertically, while still being on the left-third of the frame. The camera has slight clockwise yaw throughout the video."}, "desert-park_crane-below": {"name": "desert-park_crane-below", "scene": "desert-park", "file": "c(crane-below)_m1.0_i(none)", "seed": "85719", "source": "pexels", "desc": ""}, "desert-park_right-front": {"name": "desert-park_right-front", "scene": "desert-park", "file": "c(right-front)_m1.0_i(none)", "seed": "10438", "source": "pexels", "desc": "The camera starts on the right side of the scene, where we are seeing a rough profile view of the car from the side. The camera then moves and arcs to the left to the front-right of the car as the two people walk to the front of the car as well, ending with the two people on the rough lower-right-third of the frame."}, "drive-desert_back-follow": {"name": "drive-desert_back-follow", "scene": "drive-desert", "file": "c(back-follow)_m1.0_i(none)", "seed": "89547", "source": "pexels", "desc": "The camera starts lower to the road than the input video, pointing forwards and slightly down looking at the back of the car. The camera then flies foward as it follows the car, flying lower to the ground while tilting upwards to reveal the horizon and the rest of the desert."}, "drive-desert_side-fly": {"name": "drive-desert_side-fly", "scene": "drive-desert", "file": "c(side-fly)_m1.0_i(none)", "seed": "59621", "source": "pexels", "desc": ""}, "elderly-tennis_full-arc": {"name": "elderly-tennis_full-arc", "scene": "elderly-tennis", "file": "c(full-arc;rot_(0,(0,0,0)),(1,(0,0,10)))_m1.0_i(none)", "seed": "37102", "source": "pexels", "desc": ""}, "elderly-tennis_crane-below-zoom": {"name": "elderly-tennis_crane-below-zoom", "scene": "elderly-tennis", "file": "c(crane-below-zoom)_m1.0_i(none)", "seed": "56629", "source": "pexels", "desc": ""}, "fashion-walk_front-follow": {"name": "fashion-walk_front-follow", "scene": "fashion-walk", "file": "c(front-follow)_m1.0_i(none)", "seed": "57648", "source": "pexels", "desc": ""}, "fashion-walk_side-truck": {"name": "fashion-walk_side-truck", "scene": "fashion-walk", "file": "c(side-truck)_m1.0_i(none)", "seed": "38317", "source": "pexels", "desc": ""}, "fashion-walk_crane-above": {"name": "fashion-walk_crane-above", "scene": "fashion-walk", "file": "c(crane-above)_m1.0_i(none)", "seed": "10152", "source": "pexels", "desc": ""}, "forehead-sticky_left-right-shoulder": {"name": "forehead-sticky_left-right-shoulder", "scene": "forehead-sticky", "file": "c(left-right-shoulder)_m1.0_i(none)", "seed": "95708", "source": "pexels", "desc": "The camera starts on the left side of the frame, pointing at the man with the woman's back facing the camera. The camera then arcs to the right side of the frame, ending on an over-the-shoulder shot focusing on the woman, where the man's left arm is at the foreground of the frame."}, "forehead-sticky_crane-through-arm": {"name": "forehead-sticky_crane-through-arm", "scene": "forehead-sticky", "file": "c(crane-through-arm)_m1.0_i(none)", "seed": "37878", "source": "pexels", "desc": ""}, "friends-restaurant_crane-below": {"name": "friends-restaurant_crane-below", "scene": "friends-restaurant", "file": "c(crane-below)_m1.0_i(none)", "seed": "32104", "source": "pexels", "desc": ""}, "friends-restaurant_side-dolly": {"name": "friends-restaurant_side-dolly", "scene": "friends-restaurant", "file": "c(side-dolly;rot_(1,(0,0,7)))_m1.0_i(none)", "seed": "40338", "source": "pexels", "desc": "The camera starts on the left hand side of the scene and slightly far from the table, in a composition where all five people in the input video can be seen. The camera then moves in closer until only four of the people can be seen."}, "funeral-procession_side-truck": {"name": "funeral-procession_side-truck", "scene": "funeral-procession", "file": "c(side-truck)_m1.0_i(none)", "seed": "65876", "source": "pexels", "desc": "The camera starts on the left side of the scene and profile to the people, further away from the people than the input video to show their full body. The camera then moves to the right as it follows the foward walking motion of the people, keeping them roughly centered in the shot the entire time."}, "funeral-procession_man-to-man": {"name": "funeral-procession_man-to-man", "scene": "funeral-procession", "file": "c(man-to-man)_m1.0_i(none)", "seed": "28310", "source": "pexels", "desc": ""}, "girls-selfie_right-left": {"name": "girls-selfie_right-left", "scene": "girls-selfie", "file": "c(right-left;rot_(0,(0,0,2)),(1,(0,0,-10)))_m1.0_i(none)", "seed": "50323", "source": "pexels", "desc": ""}, "girls-selfie_crane-above": {"name": "girls-selfie_crane-above", "scene": "girls-selfie", "file": "c(crane-above)_m1.0_i(none)", "seed": "90679", "source": "pexels", "desc": "The camera starts a bit more wide-angle than the input video, slightly to the right of the scene and close to the women talking a selfie. It then rapidly flies backwards and upwards to reveal more of them room, while tilting down to keep the women in frame and zooming in to create a slight dolly-zoom effect."}, "goat_side-truck": {"name": "goat_side-truck", "scene": "goat", "file": "c(side-truck)_m1.0_i(none)", "seed": "50584", "source": "davis", "desc": ""}, "goat_truck-dolly-zoom": {"name": "goat_truck-dolly-zoom", "scene": "goat", "file": "c(truck-dolly-zoom)_m1.0_i(none)", "seed": "79577", "source": "davis", "desc": "The camera starts to the right side of the goat in a profile view, a bit closer and more wide angle than the input video. The camera then moves to the right, following the motion of the goat, while flying back and zooming in to create a dolly-zoom effect (the goat stays the same size while the background gets bigger). The camera and scene motion is smooth the entire time."}, "goat_crane-above": {"name": "goat_crane-above", "scene": "goat", "file": "c(crane-above)_m1.0_i(none)", "seed": "79318", "source": "davis", "desc": ""}, "golf_dolly-in": {"name": "golf_dolly-in", "scene": "golf", "file": "c(dolly-in;rot_(1,(0,0,-15)))_m1.0_i(none)", "seed": "56050", "source": "pexels", "desc": ""}, "golf_dolly-out": {"name": "golf_dolly-out", "scene": "golf", "file": "c(dolly-out;rot_(1,(0,0,-15)))_m1.0_i(none)", "seed": "55180", "source": "pexels", "desc": "The camera starts on the right side of the input video, where the golfer is facing the camera. It starts slightly above the golfer, then flying away while tilting upwards slightly to reveal more of the golf course as the golfer swings his golf club."}, "hike_front-follow": {"name": "hike_front-follow", "scene": "hike", "file": "c(front-follow)_m1.0_i(none)", "seed": "89120", "source": "davis", "desc": "The camera starts on the front left side of the hiker, at roughly the same distance to the hiker as the input video. It then moves backward roughly following the frontward walk of the hiker, moving slightly further away from them."}, "hike_crane-above": {"name": "hike_crane-above", "scene": "hike", "file": "c(crane-above)_m1.0_i(none)", "seed": "83857", "source": "davis", "desc": ""}, "info-read_side-truck": {"name": "info-read_side-truck", "scene": "info-read", "file": "c(side-truck)_m1.0_i(none)", "seed": "61366", "source": "pexels", "desc": ""}, "info-read_dolly-zoom": {"name": "info-read_dolly-zoom", "scene": "info-read", "file": "c(dolly-zoom;rot_(0,(0,0,0)),(1,(0,0,20)))_m1.0_i(none)", "seed": "47258", "source": "pexels", "desc": ""}, "magnifying-glass_man-book-three": {"name": "magnifying-glass_man-book-three", "scene": "magnifying-glass", "file": "c(man-book-three)_m1.0_i(none)", "seed": "36846", "source": "pexels", "desc": ""}, "magnifying-glass_back-crane-above": {"name": "magnifying-glass_back-crane-above", "scene": "magnifying-glass", "file": "c(back-crane-above)_m1.0_i(none)", "seed": "84282", "source": "pexels", "desc": ""}, "man-smoke_front-dolly-in": {"name": "man-smoke_front-dolly-in", "scene": "man-smoke", "file": "c(front-dolly-in)_m1.0_i(none)", "seed": "46695", "source": "pexels", "desc": ""}, "man-smoke_arc-crane-above": {"name": "man-smoke_arc-crane-above", "scene": "man-smoke", "file": "c(arc-crane-above)_m1.0_i(none)", "seed": "92254", "source": "pexels", "desc": ""}, "martian-flag_front-follow": {"name": "martian-flag_front-follow", "scene": "martian-flag", "file": "c(front-follow)_m1.0_i(none)", "seed": "42677", "source": "pexels", "desc": ""}, "martian-flag_crane-below-zoom": {"name": "martian-flag_crane-below-zoom", "scene": "martian-flag", "file": "c(crane-below-zoom)_m1.0_i(none)", "seed": "67388", "source": "pexels", "desc": "The camera starts far away and high up from the scene, slightly behind the astronaut with the flag and placing them on the bottom-left-third of the frame. The camera then flies in much closer to the astronaut, arcing to the left to be a bit to the front of the astronaut, while getting closer to the ground."}, "mountain-hike_front-follow": {"name": "mountain-hike_front-follow", "scene": "mountain-hike", "file": "c(front-follow)_m1.0_i(none)", "seed": "60967", "source": "pexels", "desc": "The camera starts on the front-right side of the hiker, closer to them than the input video. It then flies backwards roughly following the motion of the hiker, revealing more of the scene as the hiker steps on a rock to take in the scenery."}, "mountain-hike_arc-zoom": {"name": "mountain-hike_arc-zoom", "scene": "mountain-hike", "file": "c(arc-zoom)_m1.0_i(none)", "seed": "74326", "source": "pexels", "desc": ""}, "mountain-man_dolly-zoom": {"name": "mountain-man_dolly-zoom", "scene": "mountain-man", "file": "c(dolly-zoom)_m1.0_i(none)", "seed": "20132", "source": "pexels", "desc": ""}, "mountain-man_left-right": {"name": "mountain-man_left-right", "scene": "mountain-man", "file": "c(left-right)_m1.0_i(none)", "seed": "77843", "source": "pexels", "desc": ""}, "park-selfie_front-pedestal": {"name": "park-selfie_front-pedestal", "scene": "park-selfie", "file": "c(front-pedestal)_m1.0_i(none)", "seed": "25887", "source": "pexels", "desc": "The camera starts on the left side of the input video, facing the front of the two people sitting and slightly further away so their upper-leg and body are visible. The camera starts lower and tilting up, then moving upwards while tilting down to keep the two people roughly vertically centered in frame, revealing more of the park behind them. The camera also has clockwise yaw the entire time so the horizon is not level."}, "park-selfie_crane-above": {"name": "park-selfie_crane-above", "scene": "park-selfie", "file": "c(crane-above)_m1.0_i(none)", "seed": "29827", "source": "pexels", "desc": ""}, "parkour_opp-pan": {"name": "parkour_opp-pan", "scene": "parkour", "file": "c(opp-pan)_m1.0_i(none)", "seed": "40962", "source": "davis", "desc": ""}, "parkour_left-follow": {"name": "parkour_left-follow", "scene": "parkour", "file": "c(left-follow)_m1.0_i(none)", "seed": "26965", "source": "davis", "desc": ""}, "parkour_left-front-arc": {"name": "parkour_left-front-arc", "scene": "parkour", "file": "c(left-front-arc)_m1.0_i(none)", "seed": "50131", "source": "davis", "desc": "The camera starts on the right side of the scene, facing profile to the man doing parkour. It then quickly whips and arcs to the left side of the scene, panning right to keep the man roughly centered. It then comes to a smooth stop as the man jumps the fence, while zooming in slightly."}, "phone-talk_left-arc": {"name": "phone-talk_left-arc", "scene": "phone-talk", "file": "c(left-arc)_m1.0_i(none)", "seed": "75890", "source": "pexels", "desc": ""}, "phone-talk_face-arc": {"name": "phone-talk_face-arc", "scene": "phone-talk", "file": "c(face-arc)_m1.0_i(none)", "seed": "14005", "source": "pexels", "desc": ""}, "pigeon-lady_right-dolly": {"name": "pigeon-lady_right-dolly", "scene": "pigeon-lady", "file": "c(right-dolly)_m1.0_i(none)", "seed": "86591", "source": "pexels", "desc": ""}, "pigeon-lady_crane-above": {"name": "pigeon-lady_crane-above", "scene": "pigeon-lady", "file": "c(crane-above)_m1.0_i(none)", "seed": "90619", "source": "pexels", "desc": ""}, "pigeon-lady_fly-in": {"name": "pigeon-lady_fly-in", "scene": "pigeon-lady", "file": "c(fly-in)_m1.0_i(none)", "seed": "30337", "source": "pexels", "desc": "The camera is more wide-angle than the input video and starts higher up in the scene and looking at the road. The camera then rapidly flies back and downwards to keep the person feeding the flock of pigeons at the rough center of the frame, having the shot be relatively static and staying on the person and pigeon until the end of the video."}, "rabbit-basket_crane-below-right": {"name": "rabbit-basket_crane-below-right", "scene": "rabbit-basket", "file": "c(crane-below-right;rot_(0,(0,0,20)),(1,(0,0,-15)))_m1.0_i(none)", "seed": "41485", "source": "pexels", "desc": ""}, "rabbit-basket_crane-below-left": {"name": "rabbit-basket_crane-below-left", "scene": "rabbit-basket", "file": "c(crane-below-left;rot_(0,(0,0,-15)),(1,(0,0,3)))_m1.0_i(none)", "seed": "88756", "source": "pexels", "desc": ""}, "rhino_front-follow": {"name": "rhino_front-follow", "scene": "rhino", "file": "c(front-follow;rot_(1,(0,0,5)))_m1.0_i(none)", "seed": "97002", "source": "davis", "desc": "The camera starts on the left side of the scene, pointing at the front-right side of the rhino and a bit more wide-angle and closer to the rhino than the input video. Then, the camera moves back slightly while arcing to the right, revealing a bit more of the rhino's side."}, "rhino_arc-left-right": {"name": "rhino_arc-left-right", "scene": "rhino", "file": "c(arc-left-right;rot_(0,(0,0,-5)),(1,(0,0,8)))_m1.0_i(none)", "seed": "73732", "source": "davis", "desc": ""}, "room-argue_right-left-shoulder": {"name": "room-argue_right-left-shoulder", "scene": "room-argue", "file": "c(right-left-shoulder)_m1.0_i(none)", "seed": "53014", "source": "pexels", "desc": ""}, "room-argue_pedestal-up": {"name": "room-argue_pedestal-up", "scene": "room-argue", "file": "c(pedestal-up)_m1.0_i(none)", "seed": "61358", "source": "pexels", "desc": ""}, "selfie-four_phone-dolly-zoom": {"name": "selfie-four_phone-dolly-zoom", "scene": "selfie-four", "file": "c(phone-dolly-zoom;rot_(0,(0,0,0)),(1,(0,0,25)))_m1.0_i(none)", "seed": "56128", "source": "pexels", "desc": "The camera starts on the right hand side of the input video, pointing at the four people taking a selfie with the phone at the foreground of the shot. The camera then moves closer to the four people while zooming out, creating a dolly-zoom effect where the size of the people stay roughly the same but the phone becomes larger in the frame. The camera also yaws clockwise as it flies in closer. The four people are visible the entire time."}, "selfie-four_crane-out": {"name": "selfie-four_crane-out", "scene": "selfie-four", "file": "c(crane-out)_m1.0_i(none)", "seed": "11337", "source": "pexels", "desc": ""}, "snow-bike_side-truck": {"name": "snow-bike_side-truck", "scene": "snow-bike", "file": "c(side-truck;rot_(1,(0,0,-15)))_m1.0_i(none)", "seed": "19468", "source": "pexels", "desc": ""}, "snow-bike_follow-crane-above": {"name": "snow-bike_follow-crane-above", "scene": "snow-bike", "file": "c(follow-crane-above)_m1.0_i(none)", "seed": "71234", "source": "pexels", "desc": "The camera starts a bit more wide-angle than then input video, at the back-right side of the bike and closer to the snow. The camera then moves forward following the motion of the bike, flying higher up half way through the video and farther from the biker, tilting down to keep the biker roughly vertically centered in the frame (and to the left-third of the frame)."}, "snow-dog_left-right-arc": {"name": "snow-dog_left-right-arc", "scene": "snow-dog", "file": "c(left-right-arc)_m1.0_i(none)", "seed": "76820", "source": "pexels", "desc": "The camera starts on the left side of the frame, pointing roughly profile to the woman and the dog where the two roughly fill the frame vertically. The camera then arcs to the right of the frame while keeping them vertically filling the frame, ending on the right-front side of the woman and dog."}, "snow-dog_crane-above": {"name": "snow-dog_crane-above", "scene": "snow-dog", "file": "c(crane-above)_m1.0_i(none)", "seed": "32953", "source": "pexels", "desc": ""}, "snowboard_side-truck": {"name": "snowboard_side-truck", "scene": "snowboard", "file": "c(side-truck;rot_(1,(0,0,-10)))_m1.0_i(none)", "seed": "98072", "source": "davis", "desc": ""}, "snowboard_back-follow": {"name": "snowboard_back-follow", "scene": "snowboard", "file": "c(back-follow)_m1.0_i(none)", "seed": "42771", "source": "davis", "desc": ""}, "snowboard_crane-follow": {"name": "snowboard_crane-follow", "scene": "snowboard", "file": "c(crane-follow)_m1.0_i(none)", "seed": "36609", "source": "davis", "desc": "The camera is more wide-angle than the input video, starting out behind, far away, and above the snowboarder. The camera then flies towards the snowboarder, getting much closer to the snow and tilting upwards to keep the snowboarder roughly centered in the frame, ending on the back-right side of the snowboarder while vertically filling the frame with them."}, "soapbox_front-follow": {"name": "soapbox_front-follow", "scene": "soapbox", "file": "c(front-follow)_m1.0_i(none)", "seed": "60155", "source": "davis", "desc": "The camera starts out zoomed in slightly, pointing at the front of the cart and the two people on the cart, slightly to the left hand side of it. It then flies backwards following the motion of the cart as it travels towards the camera, while zooming out slightly to reveal more of the scene."}, "soapbox_zoom-in": {"name": "soapbox_zoom-in", "scene": "soapbox", "file": "c(zoom-in)_m1.0_i(none)", "seed": "66747", "source": "davis", "desc": ""}, "soapbox_side-truck": {"name": "soapbox_side-truck", "scene": "soapbox", "file": "c(side-truck)_m1.0_i(none)", "seed": "85173", "source": "davis", "desc": ""}, "street-turn_dolly-zoom": {"name": "street-turn_dolly-zoom", "scene": "street-turn", "file": "c(dolly-zoom;rot_(0,(0,0,-5)),(1,(0,0,15)))_m1.0_i(none)", "seed": "72108", "source": "pexels", "desc": ""}, "street-turn_arc-right": {"name": "street-turn_arc-right", "scene": "street-turn", "file": "c(arc-right;rot_(0,(0,0,-10)),(1,(0,0,-5)))_m1.0_i(none)", "seed": "38191", "source": "pexels", "desc": ""}, "swing_front-dolly-in": {"name": "swing_front-dolly-in", "scene": "swing", "file": "c(front-dolly-in;rot_(1,(0,0,-10)))_m1.0_i(none)", "seed": "36179", "source": "davis", "desc": ""}, "swing_arc-left": {"name": "swing_arc-left", "scene": "swing", "file": "c(arc-left)_m1.0_i(none)", "seed": "20227", "source": "davis", "desc": "The camera starts on the right side of the scene, looking at the swing frame and woman in a profile view. The camera then arcs left and flies towards the front-right side of the woman and the swing, panning right to keep the woman and the swing frame roughly centered."}, "truck-pose_left-right": {"name": "truck-pose_left-right", "scene": "truck-pose", "file": "c(left-right;rot_(0,(0,0,-10)),(1,(0,0,15)))_m1.0_i(none)", "seed": "44473", "source": "pexels", "desc": "The camera starts on the left side of the scene pointed towards the woman. It then arcs around the woman to the right of her and revealing more of the front of the truck, keeping her roughly centered in the frame. The camera keeps the upper half of her body roughly visible the entire time."}, "truck-pose_crane-below": {"name": "truck-pose_crane-below", "scene": "truck-pose", "file": "c(crane-below)_m1.0_i(none)", "seed": "32929", "source": "pexels", "desc": ""}, "woman-beach_front-follow": {"name": "woman-beach_front-follow", "scene": "woman-beach", "file": "c(front-follow;rot_(1,(0,0,-5)))_m1.0_i(none)", "seed": "95710", "source": "pexels", "desc": ""}, "woman-beach_crane-above": {"name": "woman-beach_crane-above", "scene": "woman-beach", "file": "c(crane-above)_m1.0_i(none)", "seed": "97778", "source": "pexels", "desc": ""}, "woman-beach_dolly-out": {"name": "woman-beach_dolly-out", "scene": "woman-beach", "file": "c(dolly-out)_m1.0_i(none)", "seed": "39458", "source": "pexels", "desc": ""}, "woman-phone_right-left": {"name": "woman-phone_right-left", "scene": "woman-phone", "file": "c(right-left)_m1.0_i(none)", "seed": "69093", "source": "pexels", "desc": ""}, "woman-phone_crane-above": {"name": "woman-phone_crane-above", "scene": "woman-phone", "file": "c(crane-above)_m1.0_i(none)", "seed": "74031", "source": "pexels", "desc": ""}, "woman-pottery_crane-below": {"name": "woman-pottery_crane-below", "scene": "woman-pottery", "file": "c(crane-below)_m1.0_i(none)", "seed": "20019", "source": "pexels", "desc": ""}, "woman-pottery_left-right": {"name": "woman-pottery_left-right", "scene": "woman-pottery", "file": "c(left-right)_m1.0_i(none)", "seed": "55365", "source": "pexels", "desc": ""}, "women-talk_crane-below": {"name": "women-talk_crane-below", "scene": "women-talk", "file": "c(crane-below)_m1.0_i(none)", "seed": "44259", "source": "pexels", "desc": "The camera starts on the right side of the scene, facing roughly profile to the two women and far enough away to see the whole room. The camera also starts higher up and tiling down. The camera then moves downward towards the floor, while tiling upwards to keep the two women roughly vertically centered."}, "women-talk_dolly-zoom": {"name": "women-talk_dolly-zoom", "scene": "women-talk", "file": "c(dolly-zoom;rot_(1,(0,0,-20)))_m1.0_i(none)", "seed": "28648", "source": "pexels", "desc": ""}};

        // --- Injected by Python ---
        const originalMethods = ["worldrerender", "gen3c", "trajcraft", "ex4d", "recammaster", "camclonemaster"];
        const numChoices = 6; // 6
        const numInputs = 2;   // 2
        const numPanes = 8;     // 8 (2 + 6)
        // --- End Injected ---

        let results = {};

        function getMetadata(videoPath) {
            // Path is like: "video_pairs/310254><avocado-slice_left-front-zoom_s12345.mp4"
            const parts = videoPath.split('><');
            if (parts.length > 1) {
                const fullFilename = parts[1]; // "avocado-slice_left-front-zoom_s12345.mp4"
                const match = fullFilename.match(/^(.*?)_s\d+(\.mp4)?$/);

                if (match && match[1]) {
                    const baseName = match[1];
                    // --- MODIFIED: Return 'desc' instead of 'prompt_text' ---
                    return videoMetadata[baseName] || { desc: '[Description not found]' };
                }
            }
            // --- MODIFIED: Return 'desc' instead of 'prompt_text' ---
            return { desc: '[Description not found]' };
        }


        function updateResults() {
            const resultsTextarea = document.getElementById('results');
            const jsonData = JSON.stringify(results, null, 2);
            resultsTextarea.value = jsonData;
        }

        function downloadResults() {
            console.log("Download button clicked. Starting downloadResults function...");
            const jsonData = document.getElementById('results').value;
            if (!jsonData || jsonData.trim() === "" || jsonData.trim() === "{}") {
                alert("No results to download yet. Please make at least one selection.");
                return;
            }

            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'vcam_user_study_results.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function createVideoContainer(videoPath, index) {
            const container = document.createElement('div');
            container.className = 'video-container';

            // --- MODIFIED: Get scene name for title ---
            const scene_name_with_seed = (videoPath.split('><')[1] || videoPath).replace('.mp4', '');

            const title = document.createElement('div');
            title.className = 'video-title';
            // --- MODIFIED: Update title format ---
            title.textContent = `Video ${index + 1} [${scene_name_with_seed}]`;

            const videoWrapper = document.createElement('div');
            videoWrapper.className = 'video-wrapper';

            const video = document.createElement('video');
            video.src = videoPath;
            video.controls = true;
            video.autoplay = true;
            video.muted = true;
            video.loop = true;

            const overlaysContainer = document.createElement('div');
            overlaysContainer.className = 'video-overlays';

            // This is the new layout:
            // [0: Source] [2: A] [3: B] [4: C]
            // [1: Warped] [5: D] [6: E] [7: F]

            const paneWidth = 100 / 4; // 4 columns
            const paneHeight = 100 / 2; // 2 rows

            // Define the 8 pane positions
            const panePositions = [
                { top: 0, left: 0 },         // Pane 0 (Source)
                { top: paneHeight, left: 0 }, // Pane 1 (Warped)
                { top: 0, left: paneWidth },   // Pane 2 (Option A)
                { top: 0, left: paneWidth * 2 }, // Pane 3 (Option B)
                { top: 0, left: paneWidth * 3 }, // Pane 4 (Option C)
                { top: paneHeight, left: paneWidth },   // Pane 5 (Option D)
                { top: paneHeight, left: paneWidth * 2 }, // Pane 6 (Option E)
                { top: paneHeight, left: paneWidth * 3 }  // Pane 7 (Option F)
            ];

            // Create the 8 overlay divs
            for (let i = 0; i < numPanes; i++) {
                const overlay = document.createElement('div');
                overlay.className = 'video-overlay';
                overlay.style.left = `${panePositions[i].left}%`;
                overlay.style.top = `${panePositions[i].top}%`;
                overlay.style.width = `${paneWidth}%`;
                overlay.style.height = `${paneHeight}%`;
                overlay.dataset.sectionIndex = i; // This index matches the hover logic
                overlaysContainer.appendChild(overlay);
            }

            videoWrapper.appendChild(video);
            videoWrapper.appendChild(overlaysContainer);

            const videoInfo = document.createElement('div');
            videoInfo.className = 'video-info';
            const metadata = getMetadata(videoPath);

            const descItem = document.createElement('div');
            descItem.className = 'video-info-item';

            const descLabel = document.createElement('span');
            descLabel.className = 'video-info-label';
            descLabel.textContent = 'Camera description:';

            const descText = document.createElement('span');
            descText.textContent = metadata.desc; // Get description from metadata

            descItem.appendChild(descLabel);
            descItem.appendChild(descText);
            videoInfo.appendChild(descItem);

            const questionsContainer = document.createElement('div');
            questionsContainer.className = 'questions';

            const questions = [
                "Q1: Which option best preserves the input video's content (identity, scene, and motion)?",
                "Q2: Which option's camera trajectory and zoom best matches the camera visualization?",
                "Q3: Which option has the best overall quality (video fidelity, geometric coherence, and motion quality)?"
            ];

            const permutation_string = videoPath.split('/')[1].split('><')[0];
            const permutation = permutation_string.split('').map(Number);

            questions.forEach((questionText, qIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';

                const questionTitle = document.createElement('div');
                questionTitle.className = 'question-title';
                questionTitle.textContent = questionText;

                const options = document.createElement('div');
                options.className = 'options';

                // Dynamically create 6 option labels (A, B, C, D, E, F)
                const optionLabels = Array.from({ length: numChoices }, (_, i) => String.fromCharCode(65 + i));

                optionLabels.forEach((label, mIndex) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.textContent = label;
                    // --- MODIFIED: Set height via CSS from previous turn ---
                    optionDiv.style.height = '45px';

                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = `video_${index}_q${qIndex}`;

                    const permuted_method_index = permutation[mIndex];
                    const original_method = originalMethods[permuted_method_index];
                    radio.value = original_method;

                    optionDiv.appendChild(radio);

                    optionDiv.addEventListener('click', () => {
                        options.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        optionDiv.classList.add('selected');
                        radio.checked = true;

                        if (!results[videoPath]) results[videoPath] = {};
                        results[videoPath][`q${qIndex + 1}`] = radio.value;
                        updateResults();
                    });

                    // --- MODIFIED: Update hover logic for 2 inputs ---
                    optionDiv.addEventListener('mouseenter', () => {
                        const overlays = container.querySelectorAll('.video-overlay');
                        overlays.forEach((overlay, overlayIndex) => {
                            // Highlight all input panes (0, 1) and the hovered pane (mIndex + numInputs)
                            if (overlayIndex < numInputs || overlayIndex === mIndex + numInputs) {
                                overlay.classList.add('highlighted');
                            } else {
                                overlay.classList.add('dimmed');
                            }
                        });
                    });

                    optionDiv.addEventListener('mouseleave', () => {
                        const overlays = container.querySelectorAll('.video-overlay');
                        overlays.forEach(overlay => {
                            overlay.classList.remove('dimmed');
                            overlay.classList.remove('highlighted');
                        });
                    });

                    options.appendChild(optionDiv);
                });
                // --- END MODIFICATION ---

                questionDiv.appendChild(questionTitle);
                questionDiv.appendChild(options);
                questionsContainer.appendChild(questionDiv);
            });

            container.appendChild(title);
            container.appendChild(videoWrapper);
            container.appendChild(videoInfo);
            container.appendChild(questionsContainer);

            return container;
        }

        function initializeStudy() {
            const videoContainers = document.getElementById('video-containers');
            videos.forEach((videoPath, index) => {
                const container = createVideoContainer(videoPath, index);
                videoContainers.appendChild(container);
            });
            updateResults();
        }

        function updateBeamHeights() {
            const videoContainers = document.querySelectorAll('.video-container');
            videoContainers.forEach(container => {
                const video = container.querySelector('video');
                const options = container.querySelectorAll('.option');
                if (video && options.length > 0) {
                    const videoRect = video.getBoundingClientRect();
                    options.forEach(option => {
                        const optionRect = option.getBoundingClientRect();
                        const beamHeight = optionRect.top - videoRect.bottom;
                        if (beamHeight > 0) {
                            option.style.setProperty('--beam-height', beamHeight + 'px');
                        }
                    });
                }
            });
        }

        initializeStudy();
        setTimeout(updateBeamHeights, 100);
        window.addEventListener('resize', updateBeamHeights);

        const downloadButton = document.getElementById('downloadButton');
        if (downloadButton) {
            console.log("Page loaded. Successfully found download button and attached click listener.");
            downloadButton.addEventListener('click', downloadResults);
        } else {
            console.error("CRITICAL: Page loaded, but could not find element with id 'downloadButton'.");
        }
    </script>
</body>
</html>
